<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自动登录</title>
    <style>
        table {
            width: 500px;
            height: 100%;
            margin: 2rem auto;
            font-size: 1.5rem;
        }

        div.margin-auto {
            width: 500px;
            height: 100%;
            margin: 2rem auto;
            font-size: 1.5rem;
        }

        input {
            height: 2rem;
            line-height: 2rem;
            width: 20rem;
            font-size: 1.5rem;
        }

        button {
            font-size: 1rem;
        }

        div.mask {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            z-index: 10000;
            position: absolute;
            top: 0;
            left: 0;
            background: #cdf;
            opacity: 0.2;
            display: none;
            color: red;
        }
    </style>
</head>
<body>
<center><h1>华中科技大学自动登录系统</h1></center>
<div class="box">
    <table class="margin-auto">
        <tr>
            <td>用户名</td>
            <td><input type="text" class="username"></td>
        </tr>
        <tr>
            <td>密码</td>
            <td><input type="password" class="password"></td>
        </tr>
        <tr>
            <td>&nbsp</td>
            <td>
                <button onclick="login()">登录</button>
            </td>
        </tr>
    </table>
    <div class="result margin-auto">
    </div>
</div>
<div class="mask">
    <br><br><br><br><br><br><br><br>
    <center><h2 id="second">数据加载中......</h2></center>
</div>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script>
    var c = 0
    var t

    function timedCount() {
        document.getElementById('second').innerHTML = "用时 "+c+" s"
        c = c + 1
        t = setTimeout("timedCount()", 1000)
    }

    function stopCount() {
        c = 0
        clearTimeout(t)
    }
    function login() {
//        var mask = $(".mask");
        $(".mask").show();
        timedCount()

//        clearInterval(interval);
//        return
        $(function () {
            var url = "http://127.0.0.1:5000/login";
            var url = "http://tmp.cc/api";
            var param = {
                "username": $(".username").val().trim(),
                "password": $(".password").val().trim()
            };
            $.post(url, param, function (res) {
//                console.log(res)
                $(".result").html(res)
                stopCount()
                $(".mask").hide();
            });
        });
    }
</script>
</body>
</html>